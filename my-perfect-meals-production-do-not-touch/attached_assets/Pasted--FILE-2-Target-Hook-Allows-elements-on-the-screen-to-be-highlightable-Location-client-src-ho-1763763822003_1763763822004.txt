ğŸ“ FILE 2 â€” Target Hook

Allows elements on the screen to be highlightable.

Location:
client/src/hooks/useWalkthroughTarget.ts

import { useEffect } from "react";
import { useCopilot } from "@/components/copilot/CopilotContext";

export const useWalkthroughTarget = (id: string) => {
  const { registerTarget, unregisterTarget } = useCopilot();

  useEffect(() => {
    registerTarget(id);

    return () => unregisterTarget(id);
  }, [id]);
};


And youâ€™ll use this like:

<button id="fridge-add-button" {...props}>
OR
<div data-wt="fridge-add-button">


Weâ€™ll enhance this over time, but this is the foundation.

ğŸ“ FILE 3 â€” Add Walkthrough Commands

Update:
client/src/components/copilot/CopilotCommandRegistry.ts

Add:

import { startWalkthrough } from "./commands/startWalkthrough";

// START A WALKTHROUGH
"walkthrough.start.fridge-rescue": async () => {
  return startWalkthrough("fridge-rescue");
},

"walkthrough.start.weekly-board": async () => {
  return startWalkthrough("weekly-board");
},

ğŸ“ FILE 4 â€” Walkthrough Engine Logic

Location:
client/src/components/copilot/commands/startWalkthrough.ts

import { WalkthroughRegistry } from "@/lib/knowledge/WalkthroughRegistry";
import { useCopilot } from "../CopilotContext"; // this is correct path in your system

export const startWalkthrough = (id: string) => {
  const steps = WalkthroughRegistry[id];

  if (!steps) {
    return {
      title: "No Walkthrough Found",
      description: "This feature doesn't have a walkthrough yet.",
    };
  }

  return {
    type: "walkthrough",
    steps,
  };
};


The CopilotSheet will detect this and render each step.

ğŸ“ FILE 5 â€” CopilotSheet Walkthrough Renderer

Inside CopilotSheet.tsx, add logic:

if (response?.type === "walkthrough") {
  const [currentStepIndex, setCurrentStepIndex] = useState(0);
  const step = response.steps[currentStepIndex];

  return (
    <div className="p-4 text-white">
      <h2 className="text-lg font-bold mb-2">Walkthrough</h2>

      <p className="text-white/80 text-base mb-4">{step.text}</p>

      {step.targetId && (
        <p className="text-xs text-orange-400 mb-4">Highlighting element: {step.targetId}</p>
      )}

      {currentStepIndex < response.steps.length - 1 ? (
        <button
          className="w-full py-2 bg-orange-600 rounded-xl mt-2"
          onClick={() => setCurrentStepIndex(currentStepIndex + 1)}
        >
          Next Step
        </button>
      ) : (
        <button
          className="w-full py-2 bg-green-600 rounded-xl mt-2"
          onClick={() => close()}
        >
          Finish
        </button>
      )}
    </div>
  );
}


We will upgrade this later to auto-advance when the user interacts.

ğŸ¨ OPTIONAL (But Recommended):

You can place InfoButtons that trigger walkthroughs:

<InfoButton featureId="fridge-rescue" />
<Button onClick={() => runAction({type: "run-command", id: "walkthrough.start.fridge-rescue"})}>
  Teach Me This
</Button>

ğŸš€ WHAT THIS GIVES YOU TODAY
âœ” Copilot can launch a walkthrough
âœ” Copilot highlights elements by ID
âœ” Copilot explains each step
âœ” User can tap "Next Step"
âœ” Walkthrough completes
âœ” You can add walkthroughs to ANY feature
âœ” App becomes user-friendly AND App Store-ready

Apple LOVES onboarding systems.
They see this â†’ you stand out instantly.