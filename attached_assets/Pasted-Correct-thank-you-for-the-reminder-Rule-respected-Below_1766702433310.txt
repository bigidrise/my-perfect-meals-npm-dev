Correct — thank you for the reminder. Rule respected.
Below is **ONLY** the **Architect Implementation Task List**.
No execution. No assumptions. No extra commentary.

---

# Architect Implementation Task List

**Scope: Ingredient Contract, Measurements, Rounding Cleanup, AI Picker Input**

## PHASE 1 — INGREDIENT CONTRACT (SERVER-SIDE, AUTHORITATIVE)

### Task 1.1 — Define Unified Ingredient Contract

* Create a single shared `Ingredient` type (server, shared types)
* Fields:

  * `name: string`
  * `amount: string`
  * `unit: "oz" | "lb" | "cup" | "tbsp" | "tsp" | "each"`
  * `preparationNote?: string`
* Explicitly **exclude**:

  * ingredient-level macro fields
  * metric units (g, ml)
  * “piece” for proteins

**Acceptance check:**
All generators reference the same Ingredient type.

---

### Task 1.2 — Strip Ingredient-Level Macros

* Identify all generators/prompts that emit:

  * protein / carbs / fat per ingredient
* Remove those fields at the source **and**
* Add a server-side guard that drops them if present

**Acceptance check:**
No ingredient row includes macro data anywhere in the app.

---

## PHASE 2 — AI PROMPT & NORMALIZATION ENFORCEMENT

### Task 2.1 — Update AI Prompt Measurement Rules

* Modify prompts in:

  * `promptBuilder.ts`
  * `dessert-creator.ts`
  * any generator using ingredient lists
* Enforce rules:

  * U.S. units only
  * proteins must be oz or lb
  * forbid grams, ml, “pieces” for meat
  * realistic protein servings (4–8 oz typical)

**Acceptance check:**
Raw AI output does not contain metric units.

---

### Task 2.2 — Server-Side Ingredient Normalizer (Safety Net)

* Implement normalization utility in unified pipeline:

  * Validates unit against allowed list
  * Normalizes protein quantities to oz/lb
  * Rejects or converts invalid units
  * Strips any stray macro fields
* Runs **before** response is sent to client

**Acceptance check:**
Even malformed AI output is corrected before rendering.

---

## PHASE 3 — CREATE WITH AI PICKER (UX + CONTRACT)

### Task 3.1 — Replace Capped Ingredient Picker

* Change Create with AI Picker from:

  * limited selectable list
  * to **free-text input**
* Optional:

  * autocomplete suggestions
  * recent ingredients
* No hard limits on ingredient vocabulary

**Acceptance check:**
User can type any ingredient (e.g., Indian, cultural foods).

---

## PHASE 4 — MEASUREMENT ROUNDING CLEANUP (NOT SERVINGS)

### Task 4.1 — Identify Rounding Controls

* Locate UI logic for rounding options:

  * tenths (0.1)
  * halves (0.5)
  * whole rounding selectors

### Task 4.2 — Remove Rounding (Only) From:

* Kids meal boards
* Toddler meal boards
* Craving presets / premades

**Important constraint:**

* ❗ **Servings logic remains untouched**
* Only rounding behavior is removed

**Acceptance check:**
These cards behave identically to the rest of the app with respect to measurements.

---

## PHASE 5 — CONSISTENCY VERIFICATION

### Task 5.1 — Cross-Feature Audit

Verify the following features now behave uniformly:

* Create with Chef
* Create with AI
* Weekly Meal Board
* Kids / Toddler boards
* Craving presets
* Dessert Creator
* Restaurant Guide (ingredient display only)

**Acceptance check:**

* No grams shown anywhere in ingredients
* No ingredient-level macros
* No special rounding UI
* Protein amounts always in oz/lb

---

## DELIVERABLE FROM ARCHITECT

Before any code is written:

* Confirm each task is feasible as written
* Flag any hidden dependencies or risks
* Propose ordering if different from above

---

When the architect confirms **agreement with this task list**, we reconvene for the **implementation green light**.

Nothing moves until then.
