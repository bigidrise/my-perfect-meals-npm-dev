Here is **PHASE 3.2 ‚Äî Diabetes Guardrails** written EXACTLY the way the architect needs to see it:
clean, precise, and impossible to misinterpret.

This follows **Anti-Inflammatory guardrails** and builds the second layer of your medical-grade system.

---

# ‚úÖ **ARCHITECT PROMPT ‚Äî PHASE 3.2: DIABETES GUARDRAILS**

**Architect ‚Äî Anti-Inflammatory guardrails are complete.
Begin Phase 3.2: Diabetes Guardrails.
Load full project context, including Create With Chef + Snack Creator + unified card formatting.**

---

# üéØ **WHY WE ARE DOING THIS (High-Level Purpose)**

The Diabetic Meal Builder requires **strict metabolic constraints** to prevent:

* Blood sugar spikes
* High glycemic index foods
* Excess carbohydrate load
* Hidden sugar exposure
* Improper portion sizes

**No AI-generated meal may violate diabetes safety rules.**
Snack Creator must follow the same rules without exception.

The objective is:

**Every diabetic user receives meals that protect glucose levels, lower glycemic impact, and follow diabetic nutrition standards ‚Äî automatically.**

This is a medical requirement, not a preference.

---

# üî• **WHAT MUST BE ENFORCED (Diabetes Guardrail Rules)**

## ‚ö†Ô∏è **ABSOLUTE AVOIDANCE LIST**

These ingredients MUST NEVER appear in diabetic meals/snacks:

### Sugars / Sweeteners

* White sugar
* Brown sugar
* Honey
* Maple syrup
* Agave
* High-fructose corn syrup
* Molasses
* Candy, chocolate (non-dark)
* Sweetened yogurts
* Sugary granola

### High GI Starches

* White rice
* Regular pasta
* Potatoes (mashed, fries, baked)
* Tortillas (flour)
* Pizza crust
* Pastries, breads, muffins
* White flour anything

### Sweet fruits

* Bananas
* Pineapple
* Mango
* Grapes
* Watermelon

### Sugary condiments

* BBQ sauce
* Ketchup (unless low-sugar)
* Teriyaki (unless sugar-free)

---

## ‚úîÔ∏è **ALLOWED WITH CAUTION (Substitution Required)**

The system must SUBSTITUTE these:

* Flour tortilla ‚Üí **low-carb tortilla**
* Regular pasta ‚Üí **protein pasta / chickpea pasta / zucchini noodles**
* White rice ‚Üí **cauliflower rice / brown rice (small portions)**
* Potatoes ‚Üí **cauliflower mash or roasted vegetables**
* High-sugar sauces ‚Üí **sugar-free versions**

---

## üíö **PREFERRED INGREDIENTS**

* Lean protein (chicken, turkey, fish, eggs)
* Non-starchy vegetables (broccoli, spinach, zucchini, asparagus)
* Whole grains in limited portions (quinoa, farro, oats)
* Healthy fats: olive oil, avocado, nuts
* Berries (best fruit option)
* Greek yogurt (plain, unsweetened)
* Cottage cheese (low-fat)

---

## üìä **MACRO/METABOLIC RULES**

These rules MUST shape the generation logic:

1. **Low glycemic impact**
2. **Moderate protein (priority)**
3. **Higher fiber**
4. **Moderate to low carbohydrates**
5. **Balanced healthy fats**
6. **Even macro distribution across the day**

Snacks must be:

* Low-carb
* High-protein or high-fiber
* Low sugar
* Minimal glycemic load

---

# üß© **HOW TO IMPLEMENT (Architect Instructions)**

## **1Ô∏è‚É£ Modify unified generation pipeline**

When `dietType: "diabetic"` is detected:

### Pre-filtering

Remove all ingredients from the **avoidance list** before prompt construction.

### Prompt rewriting

The model must be told:

* The user is diabetic
* Meals must have low glycemic load
* Avoid sugar, refined carbs, high GI fruits
* Prefer lean protein + fiber-rich vegetables
* Use low-carb substitutions automatically
* Keep calories and carbs controlled

### Post-generation validation

After the AI produces the first draft:

* Scan ingredient list
* Reject anything that violates rules
* Regenerate automatically until compliant

### Macro balancing

Ensure macros reflect diabetic guidelines:

* Carbs controlled
* Protein moderate
* Fat moderate
* High fiber

---

## **2Ô∏è‚É£ MealCard Compatibility**

Final output must follow the SAME format as Create With Chef:

* Full image
* Expanded ingredients
* Detailed instructions
* Full macros
* Snacks included
* Zero missing fields

Diabetic output must not change any formatting or front-end structure.

---

## **3Ô∏è‚É£ Integrated Snack Creator Guardrails**

Snack Creator must apply identical diabetic restrictions.

Examples:

* If craving ‚Äúchocolate,‚Äù ‚Üí **dark chocolate + berries**
* If craving ‚Äúcookie,‚Äù ‚Üí **almond-flour protein cookie**
* If craving ‚Äúsweet,‚Äù ‚Üí **cinnamon Greek yogurt + berries**

Snacks must NEVER contain:

* Sugar
* Honey
* Processed flour
* High GI fruits

---

## **4Ô∏è‚É£ Affected Builders**

Apply Diabetes Guardrails ONLY to:

* **DiabeticMenuBuilder** (meals)
* Snack rows inside Diabetic builder

Do NOT apply to:

* Weekly
* General Nutrition
* Anti-inflammatory
* GLP-1
* BeachBody
* Performance
* ProCare

Those are future phases.

---

# üéØ **SUCCESS CRITERIA (Phase 3.2 Completion Requirements)**

A diabetic user using Create With Chef or Snack Creator must:

### ‚úî NEVER receive sugar-based recipes

### ‚úî NEVER receive high-carb starchy meals

### ‚úî ALWAYS get low-GI meals

### ‚úî ALWAYS get fiber-prioritized foods

### ‚úî ALWAYS get diabetic-safe snacks

### ‚úî ALWAYS get substitutions when needed

### ‚úî ALWAYS receive fully formatted meal cards identical to other builders

AND the system must:

* Remain stable
* Maintain Fridge Rescue output fidelity
* Not affect other builders

Once Diabetic Guardrails are working and tested, we move to GLP-1 Guardrails.

---

# üèÅ **Architect ‚Äî begin Phase 3.2 now and confirm when diabetic guardrails are active for both meals and snacks inside the Diabetic builder.**

---

Coach ‚Äî when you're ready for **Phase 3.3 (GLP-1 Guardrails)**, say:
**‚ÄúNext.‚Äù**
