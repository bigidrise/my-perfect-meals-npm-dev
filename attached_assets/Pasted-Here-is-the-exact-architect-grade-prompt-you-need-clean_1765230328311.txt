Here is the **exact architect-grade prompt** you need ‚Äî clean, authoritative, and structured so the architect fully understands *what we‚Äôre doing, why we‚Äôre doing it, and how we‚Äôre doing it step-by-step.*

This sets up the entire guardrail initiative AND kicks off Anti-Inflammatory Guardrails as **Phase 3.1.**

---

# ‚úÖ **ARCHITECT PROMPT ‚Äî GUARDRAIL IMPLEMENTATION PLAN (PHASE 3)**

**Architect ‚Äî load full project context including Phase 1 (Create With Chef) and Phase 2 (Snack Creator).
We are now entering PHASE 3: Guardrails.
This affects meal + snack generation inside specific builders.**

---

# üéØ **WHAT WE ARE DOING (High-Level)**

We are adding **builder-specific dietary guardrails** to every meal generator that requires medical, lifestyle, or performance restrictions.

**The purpose:**
Users must ONLY receive AI-generated meals that comply with the rules of THEIR builder.

This is mandatory for:

* Medical builders
* Weight-management builders
* Anti-inflammatory lifestyle
* Performance protocols
* Trainer and doctor presets

**No AI-generated meal or snack may violate the rules of the builder it was created in.**

Weekly Meal Board is the ONLY builder with **no guardrails**.

---

# üß† **WHY WE ARE DOING IT**

Currently, Create With Chef and Snack Creator generate excellent meals, but they do not enforce:

* Ingredient blacklists
* Calorie-density rules
* Sugar/glycemic limits
* Fat restrictions
* Protein targets
* Carb boundaries
* Seed oil exclusions
* Anti-inflammatory ingredient rules
* Performance macros
* BeachBody phase constraints
* Doctor/trainer presets

This is NOT acceptable for medical or athletic cases.

**Each builder has a unique dietary philosophy and must protect users from unsafe or off-protocol meals.**

Guardrails guarantee:

* Medical safety
* Professional accuracy
* Consistent dietary outcomes
* Doctor and trainer trust
* Apple App Store compliance for health-related claims

---

# üß© **HOW WE ARE DOING IT (Architecture Overview)**

### ‚úî Every Create With Chef and Snack Creator request must include a new field:

```
dietType: "<builder>"
```

Examples:

```
dietType: "anti-inflammatory"
dietType: "diabetic"
dietType: "glp1"
dietType: "beachbody"
dietType: "performance"
dietType: "general-nutrition"
dietType: "procare"
dietType: "weekly"   (no restrictions)
```

### ‚úî The backend must apply guardrails BEFORE final meal formatting.

That includes:

* Ingredient filtering
* Ingredient substitution
* Forbidden ingredient removal
* Macro rebalancing
* Portion adjustments
* Fat/carb/protein enforcement
* GI/sugar rules (diabetic)
* Density rules (GLP-1)
* Phase rules (BeachBody)
* Competition ratios (performance)
* Coach/doctor presets (ProCare)

### ‚úî The final meal output must still respect:

* Unified MealCard formatting
* Full ingredients
* Full instructions
* Full image
* Full macros

Guardrails modify *what* the AI is allowed to generate ‚Äî
NOT how the card looks.

---

# üî• **THE IMPLEMENTATION STRATEGY (One Builder at a Time)**

Guardrails will be implemented in **strict sequence**, one builder per phase.

This prevents global breakage and ensures each guardrail system works before moving on.

### **PHASE ORDER:**

1Ô∏è‚É£ Anti-Inflammatory
2Ô∏è‚É£ Diabetes
3Ô∏è‚É£ GLP-1
4Ô∏è‚É£ BeachBody / Body Physique
5Ô∏è‚É£ General Nutrition (light rules)
6Ô∏è‚É£ Performance & Competition
7Ô∏è‚É£ ProCare (trainer + doctor presets)

Weekly Meal Board ‚Üí **NO guardrails.**

We always test and finalize one guardrail system before beginning the next.

---

# üöÄ **PHASE 3.1 ‚Äî IMPLEMENT ANTI-INFLAMMATORY GUARDRAILS (Start Now)**

### Anti-Inflammatory Guardrail Rules:

**STRICT AVOIDANCE LIST:**

* Seed oils (canola, soybean, corn, vegetable blends)
* Inflammatory dairy (cream, butter, cheese unless explicitly low-inflammatory)
* Red meat (beef, lamb, pork)
* Refined sugar
* White flour
* Processed snacks
* Fried foods
* Margarine and shortening
* Processed meats (sausage, bacon, ham)

**PREFERRED INGREDIENTS:**

* Salmon, tuna, sardines
* Chicken breast, turkey
* Olive oil, avocado oil
* Berries, citrus, kiwi
* Leafy greens, cruciferous vegetables
* Avocado, nuts, seeds
* Herbs/spices: turmeric, ginger, garlic, basil
* Whole grains (quinoa, brown rice, farro)

**MACRO LOGIC:**

* Moderate protein
* Lower saturated fats
* No sugar spikes
* Favor fiber-rich carbs
* Use anti-inflammatory fats only

**WHAT YOU MUST DO (Architect):**

### ‚úî Add guardrail filtering to generation pipeline for dietType: "anti-inflammatory"

Steps:

1. **Filter out any forbidden ingredients BEFORE the generation prompt.**
2. **Rewrite prompt to enforce anti-inflammatory rules.**
3. **Apply ingredient substitution logic.**
4. **Reject and regenerate meals violating rules.**
5. **Apply macronutrient rebalancing.**
6. **Final output must be fully compliant AND follow the same meal card format.**

### ‚úî Snack Creator must use the same guardrails.

Snacks must avoid inflammatory foods just like meals.

### ‚úî All Anti-Inflammatory builders must use this system:

* AntiInflammatoryMenuBuilder (meals)
* Snack slots inside Anti-Inflammatory

### ‚úî Weekly Meal Board must NOT use this logic.

---

# üéØ **SUCCESS CRITERIA FOR PHASE 3.1**

Anti-Inflammatory Create With Chef and Snack Creator must:

* Never generate seed oils or inflammatory foods
* Never produce red meat
* Never include refined sugar
* Use only anti-inflammatory ingredients
* Output full meal cards
* Retain images, full instructions, and full macros
* Render identically to existing cards
* Behave exactly like Create With Chef today, but SAFER

Once Anti-Inflammatory Guardrails are stable, we move to Diabetes.

---

# üèÅ **Architect ‚Äî begin Phase 3.1 now and confirm when Anti-Inflammatory guardrails are active in both meals and snacks.**

---

Coach ‚Äî this prompt is airtight.
It tells the architect *what*, *why*, and *how*, and locks their scope down to ONLY Anti-Inflammatory for this phase.

When you're ready, I‚Äôll write the Diabetes Guardrail prompt next.
