Alright, Coach â€” here comes the **full, architect-ready Phase C.4 package**, covering EVERYTHING you asked for:

**Craving Hub â†’ Kids Hub â†’ Alcohol Hub â†’ Socializing Hub
multi-page logic + Copilot routing + Spotlight behavior.**

This is a **perfect drop-in handoff** for the architect.
NO questions.
NO back-and-forth.
Just pure execution.

Letâ€™s go.

---

# ğŸ”¥ **PHASE C.4 â€” MULTI-PAGE HUB LOGIC PACKAGE**

### *Craving Hub, Kids Hub, Alcohol Hub, Socializing Hub*

This package tells the architect **exactly** how Copilot should behave when:

* A user activates a hub by voice or text
* The hub has **multiple sub-pages**
* The hub has **2 pages vs. 8 pages**
* The hub must **not read 8+ pages out loud**
* The Spotlight/Walkthrough must handle this correctly

This is the **full instruction set**.

---

# ==============================================

# **1ï¸âƒ£ GLOBAL RULE â€” HUB-FIRST ROUTING**

# ==============================================

Whenever the user says ANY phrase that maps to a hub:

> â€œCraving Creatorâ€
> â€œKids mealsâ€
> â€œAlcoholâ€
> â€œSocializingâ€
> â€œKids foodâ€
> â€œPremadesâ€
> â€œRestaurantsâ€
> â€œGoing outâ€
> â€œDrinksâ€
> â€œMocktailsâ€
> â€œWine pairingâ€
> â€œBourbon pairingâ€
> â€œFind meals near meâ€
> â€œRestaurant guideâ€

The Copilot must ALWAYS:

### **Step A â†’ Navigate to the HUB page (never directly to subpages)**

### **Step B â†’ Apply the correct logic (small hub vs. large hub)**

### **Step C â†’ Wait for the user's next instruction**

### **Step D â†’ Navigate to the selected subpage**

This ensures everything is consistent and predictable.

---

# ==============================================

# **2ï¸âƒ£ SMALL HUB LOGIC (HUBS WITH 2 SUBPAGES)**

# ==============================================

### Hubs classified as *small*:

#### âœ… **Craving Hub**

* Craving Creator
* Craving Premades

#### âœ… **Kids Hub**

* Kids Meals
* Toddler Meals

---

## **SMALL HUB BEHAVIOR**

### When the hub opens:

Copilot says:

> â€œYouâ€™re now in the {Hub Name}.
> You can say **â€˜Creatorâ€™** or **â€˜Premadesâ€™**.
> Or tap one of the buttons.â€

### Spotlight behavior:

* Page dims
* Hub buttons stay highlighted
* NO reading a list
* User selects by voice OR tap

### When user chooses a subpage:

* Dim screen again
* Start subpage walkthrough
* (If `uiReady:false`, give text fallback)

---

# ==============================================

# **3ï¸âƒ£ LARGE HUB LOGIC (HUBS WITH MANY SUBPAGES)**

# ==============================================

### Large hubs:

#### ğŸš€ **Alcohol Hub**

(8+ subpages: Lean & Social â†’ Mocktails â†’ Wine â†’ Beer â†’ Bourbon â†’ Spirits â†’ Weaning Off â†’ Alcohol Log)

#### ğŸš€ **Socializing Hub**

(Restaurant Guide + Find Meals Near Me)

---

## **LARGE HUB BEHAVIOR**

### When Copilot enters a large hub:

Copilot says ONLY:

> **â€œYouâ€™re in the {Hub Name}.
> What would you like to open?â€**

### No listing all pages.

### No reading out 8 options.

### The Spotlight dims the whole page.

### Buttons remain tappable.

### User can say anything:

* â€œLean and socialâ€
* â€œWine pairingâ€
* â€œMocktailsâ€
* â€œRestaurant guideâ€
* â€œFind mealsâ€
* â€œMeal finderâ€
* â€œTake me to bourbonâ€

### Subpage routing:

Match via KeywordFeatureMap with priority â†’ canonical route â†’ spotlight â†’ script start.

---

# ==============================================

# **4ï¸âƒ£ ARCHITECT IMPLEMENTATION PACKAGE**

# ==============================================

## **Files the architect must modify:**

1. `CopilotCommandRegistry.ts`
2. `CanonicalAliasRegistry.ts`
3. `KeywordFeatureMap.ts`
4. `SpotlightOverlay.tsx`
5. `WalkthroughScriptEngine.ts`
6. `ScriptRegistry.ts`

No UI refactor. No page changes.
Only Copilot routing & Spotlight behavior.

---

# ==============================================

# **5ï¸âƒ£ ACTIONS FOR THE ARCHITECT**

# ==============================================

## **A. Insert SMALL-HUB logic in `CopilotCommandRegistry`**

```ts
if (currentHub && isSmallHub(currentHub)) {
  return {
    type: "hub-subpage-prompt",
    message: `Youâ€™re in the ${currentHub.label}.  
    Say ${optionsList} or tap a button.`,
    spotlight: "hub-options"
  };
}
```

Small hubs =
`CRAVING_HUB`, `KIDS_HUB`

---

## **B. Insert LARGE-HUB logic**

```ts
if (currentHub && isLargeHub(currentHub)) {
  return {
    type: "hub-subpage-prompt",
    message: `You're in the ${currentHub.label}.  
    What would you like to open?`,
    spotlight: "hub-root"
  };
}
```

Large hubs =
`ALCOHOL_HUB`, `SOCIALIZING_HUB`

---

## **C. CanonicalAliasRegistry additions**

Add a new field:

```ts
isHub: true | false
hubType: "small" | "large"
subOptions: FeatureDefinition[]
```

Apply this to:

* Craving Hub â†’ small
* Kids Hub â†’ small
* Alcohol Hub â†’ large
* Socializing Hub â†’ large

---

## **D. KeywordFeatureMap updates**

Requires alias packs:

### Craving Hub:

```
["craving", "cravings", "craving creator", "premades", "pre mades", "sweet tooth", "snack ideas"]
```

### Kids Hub:

```
["kids", "children", "kids food", "kids meals", "toddler meals"]
```

### Alcohol Hub:

```
["alcohol", "drinks", "cocktails", "mocktails", "beer", "wine", "bourbon", "spirits", "lean and social"]
```

### Socializing Hub:

```
["restaurants", "restaurant guide", "find meals", "find food", "meal finder", "going out"]
```

---

# ==============================================

# **6ï¸âƒ£ SPOTLIGHT BEHAVIOR IN HUBS**

# ==============================================

### Small hub spotlight:

* Dim entire page
* Highlight only 2 hub buttons

### Large hub spotlight:

* Dim entire page
* Keep all buttons clickable
* NO individual highlighting
* User chooses by voice OR tap

---

# ==============================================

# **7ï¸âƒ£ SCRIPT REGISTRY (PLACEHOLDER SCRIPTS)**

# ==============================================

Each subpage gets a script slot:

* craving-creator-wt
* craving-premades-wt
* kids-meals-wt
* toddler-meals-wt
* alcohol-lean-wt
* alcohol-mocktails-wt
* alcohol-wine-wt
* alcohol-beer-wt
* alcohol-bourbon-wt
* alcohol-log-wt
* socializing-restaurant-wt
* socializing-findmeals-wt

Set:

```ts
uiReady: false
```

until you define walk-through scripts later.

---

# ==============================================

# **8ï¸âƒ£ EXACT MESSAGE TO GIVE THE ARCHITECT**

# ==============================================

Here is your copy/paste handoff message:

---

**ARCHITECT PHASE C.4 REQUEST â€” MULTI-PAGE HUB NAVIGATION**

Implement multi-page hub logic exactly as follows:

### 1. Apply hub-first routing

When detecting hub-level aliases for:
Craving, Kids, Alcohol, Socializing â†’ navigate to hub before subpages.

### 2. Define hub types inside CanonicalAliasRegistry

Add:

* `isHub: true`
* `hubType: "small" | "large"`

Classifications:

* Craving Hub â†’ small (Creator + Premades)
* Kids Hub â†’ small (Kids + Toddler)
* Alcohol Hub â†’ large (8 subpages)
* Socializing Hub â†’ large (Restaurant Guide + Find Meals)

### 3. Implement hub logic inside CopilotCommandRegistry

Small hub â†’
Tell user: â€œSay Creator or Premadesâ€
Spotlight hub buttons.

Large hub â†’
Tell user: â€œWhat would you like to open?â€
Do NOT read list.
Highlight only the hub root.

### 4. Add all alias packs in KeywordFeatureMap

Include: â€œdrinksâ€, â€œmocktailsâ€, â€œwine pairingâ€, â€œkids foodâ€, â€œrestaurantsâ€, â€œfind mealsâ€, etc.

### 5. Keep all scripts dormant (uiReady:false)

We will build these walkthrough scripts in C.5.

---

# ğŸ Ready for Phase C.5 (Script Creation)?

Just say:

**â€œStart C.5â€**

And Iâ€™ll generate all **12 subpage scripts** in one shot.
