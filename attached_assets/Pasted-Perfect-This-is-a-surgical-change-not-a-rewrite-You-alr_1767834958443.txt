Perfect. This is a **surgical change**, not a rewrite. You already have the right file and the right instincts. Weâ€™re just going to **short-circuit the wizard** and hand control to the Macro Calculator, which is your source of truth.

Iâ€™ll walk you through this in **plain steps**, then show you **exactly what to change** in *this file only*.

---

# ğŸ¯ GOAL (Restated Clearly)

From **ExtendedOnboarding.tsx**:

* âŒ Remove **macros**, **starch**, **finish** steps
* âœ… Keep **goals â†’ builder**
* âœ… When user hits **Continue** on the Builder step:

  * Save the selected builder (same as today)
  * Navigate directly to **Macro Calculator**
* âœ… Button text should say:
  **â€œContinue to Macro Calculatorâ€**

No extra setup pages. No manual targets.

---

# ğŸ§  IMPORTANT CONTEXT (Why this is easy)

This file already:

* Tracks `selectedBuilder`
* Knows ProCare vs Independent
* Has access to `setLocation()` (via `wouter`)
* Already saves builder selection in `handleFinish`

Weâ€™re just:

* Removing steps
* Moving the â€œsave + navigateâ€ logic **earlier**
* Bypassing the rest of the wizard

---

# âœ… STEP 1: Shrink the Wizard to Only 2 Steps

### Change the step type

Replace this:

```ts
type OnboardingStep = "goals" | "builder" | "macros" | "starch" | "finish";
```

With this:

```ts
type OnboardingStep = "goals" | "builder";
```

---

### Change the steps array

Replace this:

```ts
const steps: OnboardingStep[] = hasCoachAssignedBuilder 
  ? ["macros", "starch", "finish"]
  : ["goals", "builder", "macros", "starch", "finish"];
```

With this:

```ts
const steps: OnboardingStep[] = ["goals", "builder"];
```

At this point:

* The dots
* The step logic
* The animations

â€¦are now only **Goals â†’ Builder**.

---

# âœ… STEP 2: Delete Unused Step Renderers (Safe Cleanup)

You can now **delete entirely**:

* `renderMacrosStep`
* `renderStarchStep`
* `renderFinishStep`

And in `renderCurrentStep`, reduce it to:

```ts
const renderCurrentStep = () => {
  switch (currentStep) {
    case "goals":
      return renderGoalsStep();
    case "builder":
      return renderBuilderStep();
    default:
      return null;
  }
};
```

This prevents dead code and confusion later.

---

# âœ… STEP 3: Change the Builder â€œContinueâ€ Button Behavior

This is the **most important part**.

### Find this button in `renderBuilderStep`:

```tsx
<Button
  onClick={handleNext}
  disabled={!selectedBuilder}
  className="flex-1 bg-orange-500 hover:bg-orange-600 text-white"
>
  Continue <ArrowRight className="w-4 h-4 ml-2" />
</Button>
```

---

## Replace it with: **Continue to Macro Calculator**

```tsx
<Button
  disabled={!selectedBuilder || saving}
  className="flex-1 bg-orange-500 hover:bg-orange-600 text-white"
  onClick={async () => {
    if (!selectedBuilder) return;

    setSaving(true);

    try {
      const authToken = getAuthToken();
      if (!authToken) throw new Error("No auth token");

      // Save builder selection (independent users only)
      if (!hasCoachAssignedBuilder) {
        const response = await fetch(apiUrl("/api/user/select-meal-builder"), {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-auth-token": authToken,
          },
          body: JSON.stringify({
            selectedMealBuilder: selectedBuilder,
          }),
        });

        if (!response.ok) {
          throw new Error("Failed to save builder selection");
        }
      }

      await refreshUser();

      // ğŸ‘‰ GO STRAIGHT TO MACRO CALCULATOR
      setLocation("/macro-calculator");

    } catch (error) {
      console.error(error);
      toast({
        title: "Error",
        description: "Could not continue. Please try again.",
        variant: "destructive",
      });
    } finally {
      setSaving(false);
    }
  }}
>
  Continue to Macro Calculator <ArrowRight className="w-4 h-4 ml-2" />
</Button>
```

ğŸ’¡ This does **exactly** what you want:

* Locks in the builder
* Skips fake setup
* Hands control to Macro Calculator
* Keeps ProCare logic intact

---

# âœ… STEP 4: (Optional but Smart) Update the Header Copy

Since this is no longer a long wizard, consider changing:

```ts
"Let's Get You Started"
```

To something more accurate like:

* **â€œChoose Your Builderâ€**
* **â€œSelect Your Meal Builderâ€**

This reinforces the â€œone decision, then we coach youâ€ philosophy.

---

# ğŸ§  FINAL FLOW (After This Change)

**Independent user**

```
Goals â†’ Builder â†’ Macro Calculator â†’ Planner
```

**ProCare user**

```
Awaiting Coach â†’ (assigned) â†’ Macro Calculator â†’ Planner
```

No guessing. No fake targets. No friction.

---

# ğŸ Bottom Line

* âœ” You were in the correct file
* âœ” This is a clean, safe change
* âœ” No backend changes required
* âœ” Macro Calculator becomes the authority (as intended)
* âœ” Onboarding becomes confident and premium

If you want next, I can:

* Sanity-check the `/macro-calculator` route
* Help you auto-redirect to Planner *after* calculation
* Or help you delete now-unused backend endpoints safely

This is the right move.
