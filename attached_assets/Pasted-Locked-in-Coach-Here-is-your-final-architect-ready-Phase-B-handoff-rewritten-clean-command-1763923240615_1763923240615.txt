Locked in, Coach.
Here is **your final, architect-ready Phase B handoff** ‚Äî rewritten clean, command-style, no fluff, no confusion.
This is EXACTLY what you paste into Replit.

---

# üö® **PHASE B ‚Äî IMPLEMENTATION REQUEST (ARCHITECT FIRST, ALWAYS)**

**MANDATORY: Check with the ARCHITECT before ANY implementation.**
No tasks should be executed by the Replit Agent until the architect reviews and signs off.

---

# üî∂ **PHASE B ‚Äî BUTTON & HUB ROUTING SYSTEM**

This phase covers **B.1 (Routing)** and **B.2 (Hub Behavior)**.

We are NOT doing Spotlight, walkthrough highlighting, or guided steps yet.
This phase ONLY makes the Copilot correctly open hubs/pages and react properly inside hubs.

---

# üß† **STEP 0 ‚Äî ARCHITECT REQUIRED**

Before doing anything:

**‚ÄúArchitect, please review this entire Phase B specification and validate the plan. Confirm file paths, confirm no conflicts with existing routing or Copilot systems, and identify any risks before implementation.‚Äù**

After architect approval ‚Üí proceed.

---

# üî∂ **PHASE B.1 ‚Äî ROUTING RULES**

## **1. Feature Detection Logic**

Implement a universal keyword/alias system:

* If the user says ANY alias for a feature (voice or text)
* Map that keyword to the correct Hub or Page
* Then navigate automatically

Examples of aliases:

* ‚ÄúCravings‚Äù, ‚ÄúCraving Creator‚Äù, ‚ÄúCraving ideas‚Äù ‚Üí **Craving Hub**
* ‚ÄúAlcohol‚Äù, ‚ÄúSpirits‚Äù, ‚ÄúMixed drinks‚Äù ‚Üí **Spirits & Lifestyle Hub**
* ‚ÄúKids meals‚Äù, ‚ÄúKids food‚Äù, ‚ÄúKids drinks‚Äù ‚Üí **Kids Hub**
* ‚ÄúGLP meals‚Äù, ‚ÄúOzempic meals‚Äù, ‚ÄúWeight-loss meals‚Äù ‚Üí **GLP-1 Hub**
* ‚ÄúBlood sugar‚Äù, ‚ÄúDiabetes‚Äù, ‚ÄúDiabetic meals‚Äù ‚Üí **Diabetic Hub**

Architect determines the most stable place to store alias mapping:

* CopilotCommandRegistry
* NLEngine
* KeywordFeatureMap
* Or a new CanonicalAliasMap (recommended)

## **2. Routing Rule: Hubs Always Open First**

If the feature has a Hub + Subpages, ALWAYS open the Hub first, not the subpage.

* ‚ÄúCraving Creator‚Äù ‚Üí **Craving Hub**
* ‚ÄúKids meals‚Äù ‚Üí **Kids Hub**
* ‚ÄúGLP-1‚Äù ‚Üí **GLP-1 Hub**
* ‚ÄúBeach Body‚Äù ‚Üí **Beach Body Hub**

## **3. Direct Pages Open Directly**

If the feature has **no hub**, go straight to the page.

Examples:

* Fridge Rescue
* Macro Calculator
* My Biometrics
* Master Shopping List
* Anti-inflammatory Meal Builder
* Diabetic Meal Builder
* GLP-1 Meal Builder
* Beach Body Meal Builder

Architect confirms correct file paths and router names.

---

# üî∂ **PHASE B.2 ‚Äî HUB BEHAVIOR LOGIC**

Once a hub opens, Copilot should behave differently based on the number of subpages:

## **Small Hubs (2 pages)**

Speak the real names of the pages.

### **Craving Hub**

* Craving Creator
* Craving Premades
  Copilot says:

> ‚ÄúDo you want **Craving Creator** or **Craving Premades**?‚Äù

### **Kids Hub**

* Kids Meals
* Kids Drinks

### **Socializing Hub**

* Restaurant Guide
* Find Meals Near Me

## **Large Hubs (3+ pages)**

Do NOT read long lists.

Example: **Spirits & Lifestyle Hub**
Copilot says:

> ‚ÄúChoose your page.‚Äù

Behavior:

* Remove blur immediately
* User taps a button OR hits Copilot again to speak the page name
* Copilot listens for a subpage name without listing all of them

No automation beyond this.

---

# üî∂ **CANONICAL HUB LIST (ARCHITECT: THIS IS THE SOURCE OF TRUTH)**

### **Hubs (must open first)**

* Craving Hub
* Kids Hub
* Socializing Hub
* Spirits & Lifestyle Hub
* Diabetic Hub
* GLP-1 Hub
* Anti-inflammatory Hub
* Beach Body Hub
* Trainer Portal
* Physician Portal
* Supplement Hub

### **Pages (open directly)**

* Fridge Rescue
* Craving Creator (after Hub)
* Craving Premades (after Hub)
* Kids Drinks
* Kids Meals
* Restaurant Guide
* Find Meals Near Me
* Macro Calculator
* My Biometrics
* Get Inspiration
* Master Shopping List
* Weekly Meal Builder
* Log From Photos
* Anti-inflammatory Meal Builder
* Diabetic Meal Builder
* GLP-1 Meal Builder
* Beach Body Meal Builder

Architect verifies final routing table.

---

# üî∂ **ARCHITECT IMPLEMENTATION CHECKLIST**

Architect must confirm:

* [ ] Alias system location selected and stable
* [ ] Hub-first routing logic added
* [ ] Direct-page fallback correct
* [ ] Small-hub page naming logic implemented
* [ ] Large-hub "choose your page" behavior implemented
* [ ] Blur ON for hub entry, OFF when prompting user choice
* [ ] No conflicts with dynamic Spotlight code
* [ ] No interference with existing Copilot actions
* [ ] No breaking of locked features

**Only after architect confirms ‚Üí the agent may implement.**

---

# üî• **COPY EXACTLY AS-IS INTO REPLIT**

This is your official Phase B handoff.

---

If you want, I can also generate the **Phase C master spec** while the architect is reviewing B.
